/*!
 * \brief –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 1, –∑–∞–¥–∞–Ω–∏–µ 7, –≤–∞—Ä–∏–∞–Ω—Ç 1
 * –ü—Ä–∏–Ω—è–≤ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ùë• –∏ ùúÄ, 0 < ùúÄ ‚©Ω 1, –≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–µ —Å —Ç–æ—á–Ω–æ-
 * —Å—Ç—å—é ùúÄ –ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ùë†(ùë•) –∏ —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ùëì (ùë•) —Ñ—É–Ω–∫—Ü–∏–∏ ùëì , –∞–±—Å–æ–ª—é—Ç–Ω—É—é
 * ‚àÜ –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é ùõø –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏:
 * ‚àÜ = |ùëì (ùë•) ‚àí ùë†(ùë•)|,
 * ùõø=|ùëì (ùë•) ‚àí ùë†(ùë•)|/|ùëì (ùë•)|,
 * ‚àÄùë• ùëì (ùë•) = sin(ùë•), ùë†(ùë•) = x - x^3/3! + x^5/5! - x^7/7! + x^9/9! + ...
 */

#include <stdio.h>
#include <math.h>
#define SUCCESS 0 /// –ö–æ–¥ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
#define INPUT_ERROR 1 /// –ö–æ–¥ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
#define VALUE_ERROR 2 /// –ö–æ–¥ –æ—à–∏–±–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

/*!
 * \brief f –¢–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
 * \param x - –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏
 * \return - –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
 */
double f(double x)
{
    return sin(x);
}

/*!
 * \brief s –ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
 * \param x - –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏
 * \param eps - –∑–∞–¥–∞–Ω–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å
 * \return - –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
 */
double s(double x, double eps)
{
    double sin_x = 0;
    int i = 1;
    double el = x;
    while (fabs(el) > eps)
    {
        sin_x += el;
        i += 2;
        el = (-1) * el * pow(x, 2) / (i * (i - 1));
    }
    return sin_x;
}

/// –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
int main(void)
{
    double x;
    double eps;
    double relative, absolute;
    printf("–í–≤–µ–¥–∏—Ç–µ x: ");
    if (scanf("%lf", &x) == 0)
    {
        printf("–û—à–∏–±–∫–∞, —ç—Ç–æ –Ω–µ —á–∏—Å–ª–æ.\n");
        return INPUT_ERROR;
    }
    printf("–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏ eps –æ—Ç –Ω—É–ª—è (–Ω–µ–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ) –¥–æ –µ–¥–∏–Ω–∏—Ü—ã: ");
    if (scanf("%lf", &eps) == 0)
    {
        printf("–û—à–∏–±–∫–∞, —ç—Ç–æ –Ω–µ —á–∏—Å–ª–æ.\n");
        return INPUT_ERROR;
    }
    if (eps <= 0 || eps > 1)
    {
        printf("–û—à–∏–±–∫–∞, –∑–Ω–∞—á–µ–Ω–∏–µ –≤–Ω–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞\n");
        return VALUE_ERROR;
    }
    double s_x = s(x, eps);
    double f_x = f(x);
    printf("%lf\n", s_x);
    printf("%lf\n", f_x);
    absolute = fabs(s_x - f_x);
    relative = absolute / fabs(f_x);
    printf("%lf\n", absolute);
    printf("%lf\n", relative);
    return SUCCESS;
}

